[
  {
    "Id": "1480109",
    "ThreadId": "656802",
    "Html": "Hi all,\r<br />\n<br />\nI am developing an Umbraco 7 MVC web site and so assume that I should convert FullTextSearchPage.master and the FullTextSearch.cshtml Umbraco Macro, to use a Partial View instead.  In doing this I am moving most of the code from FullTextSearch.cshtml into a Partial View.\r<br />\n<br />\nWhen doing this the line of code indicated with comment &quot;// &lt;&lt;&lt;&lt;&lt;&quot;  below is causing an exception:<br />\n<pre><code>            @foreach (var searchResult in resultsItem.Current.Select(&quot;/results/nodes/*&quot;))\n            {\n                var fullTextId = searchResult.Evaluate(&quot;string(./@id)&quot;);  // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n                var fullTextTitle = searchResult.Evaluate(&quot;string(./data [@alias='FullTextTitle'])&quot;);\n                var fullTextSummary = searchResult.Evaluate(&quot;string(./data [@alias='FullTextSummary'])&quot;);</code></pre>\n\nThe exception is <br />\n<pre><code>System.Web.HttpCompileException was unhandled by user code\n  ErrorCode=-2147467259\n  HResult=-2147467259\n  Message=c:\\Clancy\\A_TeraTastic\\Dev\\TeraTastic09\\TeraTastic\\Views\\Partials\\TTPV_30_10_Search_UmbFullText.cshtml(221): error CS1061: 'object' does not contain a definition for 'Evaluate' and no extension method 'Evaluate' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?)\n  Source=System.Web\n  WebEventCode=0\n  StackTrace:\n       at System.Web.Compilation.AssemblyBuilder.Compile()\n       at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()\n       at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)</code></pre>\n\n&quot;searchResult&quot; seems to be of type &quot;Object&quot; and thus has no interesting, application defined methods or properties.  It does not not contain a defnition for 'Evaluate' . Thus an exception is through at the attempted reference to searchResult.Evaluate.\r<br />\n<br />\nIf anyone can help me understand how to resolve this it would be very much aappreciated.\r<br />\n<br />\nThanks\r<br />\n<br />\nTerry Clancy\r<br />\nClanceZ<br />\n",
    "PostedDate": "2016-07-29T10:47:20.857-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "1480116",
    "ThreadId": "656802",
    "Html": "Hi again :-)\r<br />\n<br />\nOK, so I have solved this problem.  It is not clear to me why these changes were needed, ie why different syntax was needed in Razor Partial View v Umbraco Razor Macro, but in any case I solved the issued but changes in the lines marked with the comment &quot;// &lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot; below:<br />\n<pre><code>    @if (int.Parse((results.Current.Evaluate(&quot;count(/results)&quot;)).ToString()) == 1)     // &lt;&lt;&lt;&lt;&lt;&lt;&lt;  Needed to use int.Parse and ToString rather than (int) cast\n    {\n        var resultsItem = results.Current.Select(&quot;/results&quot;);\n        &lt;div class=&quot;fulltextsearch_results&quot;&gt;\n            &lt;h4 class=&quot;fulltextsearch_results_heading&quot;&gt;@String.Format(GeneralExtension.DictionaryHelper(&quot;SearchResultsFor&quot;), searchTerms)&lt;/h4&gt;\n            @{\n                var numPages = (int)resultsItem.Current.Evaluate(&quot;number(/results/summary/@numPages)&quot;);\n            }\n            @if (numPages &gt; 1)\n            {\n                @Pagination(numPages, pageNumber, getPostTerms, searchTermsUrlEncoded, getPostPage, numNumbers)\n            }\n\n            @foreach (XPathNavigator searchResult in resultsItem.Current.Select(&quot;/results/nodes/*&quot;))    // &lt;&lt;&lt;&lt;&lt;&lt;&lt;  Needed to explicitly specify type XPathNavigator  rather than var\n            {\n                string fullTextId = (string)searchResult.Evaluate(&quot;string(./@id)&quot;);    // &lt;&lt;&lt;&lt;&lt;&lt;&lt;   Needed to explicitly specify type string and add cast to string\n                string fullTextTitle = (string)searchResult.Evaluate(&quot;string(./data [@alias='FullTextTitle'])&quot;);      // &lt;&lt;&lt;&lt;&lt;&lt;&lt;   Needed to explicitly specify type string and add cast to string\n                string fullTextSummary = (string)searchResult.Evaluate(&quot;string(./data [@alias='FullTextSummary'])&quot;);      // &lt;&lt;&lt;&lt;&lt;&lt;&lt;   Needed to explicitly specify type string and add cast to string\n\n                &lt;div class=&quot;fulltextsearch_result&quot;&gt;\n                    &lt;p class=&quot;fulltextsearch_title&quot;&gt;\n                        &lt;a class=&quot;fulltextsearch_titlelink&quot; href=&quot;@umbraco.library.NiceUrl(int.Parse(fullTextId))&quot;&gt;@Html.Raw(fullTextTitle)&lt;/a&gt;\n                    &lt;/p&gt;\n                    &lt;p class=&quot;fulltextsearch_summary&quot;&gt;@Html.Raw(fullTextSummary)&lt;/p&gt;\n                &lt;/div&gt;\n            }</code></pre>\n\nI hope this helps someone :-)\r<br />\n<br />\n<br />\nTerry Clancy\r<br />\nClanceZ<br />\n",
    "PostedDate": "2016-07-29T14:43:32.367-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": "2016-07-29T14:43:45.19-07:00"
  }
]