[
  {
    "Id": "659600",
    "ThreadId": "269460",
    "Html": "\r\n<p>Hi,</p>\r\n<p>According to&nbsp;<a href=\"http://fulltextsearch.codeplex.com/wikipage?title=Advanced%20Customisation&referringTitle=Home\">http://fulltextsearch.codeplex.com/wikipage?title=Advanced%20Customisation&amp;referringTitle=Home</a>&nbsp;under &quot;Scheduled indexing&quot;\r\n it is mentioned that:</p>\r\n<p>&nbsp;</p>\r\n<p><em>&quot;In the event that content on your site changes regularly without any nodes being published a web service is provided which allows you to</em></p>\r\n<ul>\r\n<li><em>Trigger a full re-creation of the site index</em> </li><li><em>Re-index a list of nodes</em> </li></ul>\r\n<p><em>It is envisaged that this service be called by means of a scheduled task of some kind. No mechanism for doing this is currently provided, though a console application may be added in future.&quot;</em></p>\r\n<p>&nbsp;</p>\r\n<p>Has anyone tried this and can be able to show an example on how to configure?</p>\r\n<p>Regards,</p>\r\n<p>Martin</p>\r\n",
    "PostedDate": "2011-08-17T12:46:57.993-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "659860",
    "ThreadId": "269460",
    "Html": "<p>Hi Martin,</p>\r\n<p>The procedure for this should be relatively simple.</p>\r\n<p>1) Download and install the package fulltextwebservices.zip from the download section here</p>\r\n<p>2) If necessary (i.e. if the file isn't already present on your install, it wasn't on mine) download umbraco.webservices.dll, I've also put this in the download section.</p>\r\n<p>3) Modify your umbracosettings.config appropriately, see http://fulltextsearch.codeplex.com/discussions/265853</p>\r\n<p>That should give you the web service, if everything's working correctly you should see it at http://yoursite.com/umbraco/webservices/FullTextService.asmx</p>\r\n<p>In terms of actually calling it, I did start work on a console app to do just that. If you download the latest source code and open the solution you should see a project named \"fulltextconsole\", which will build a console app you can use, copy the .exe and the .exe.config somewhere after building and modify the .exe.config with your username/password and the correct URL (&lt;endpoint address=\".....\").</p>\r\n<p>If you schedule that console app to run regularly it should (in theory) trigger reindexing of your site. The console app is poorly tested and probably buggy though, so if you're going to use it in production be sure to test it thoroughly.</p>\r\n<p>Hope that helps.</p>\r\n<p>Bjorn</p>",
    "PostedDate": "2011-08-18T01:48:09.93-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "660196",
    "ThreadId": "269460",
    "Html": "<p>Hi Bjorn,</p>\n<div></div>\n<div>Thanks for your answer. I can do step 1-3 but since I have no server acces (only FTP) I can&acute;t run an exe file. But a collegue of min pointed me in the direction of making a .NET usercontrol that calls the SOAP webservice. I will try doing that and post  my solution if it comes out working good.</div>\n<div></div>\n<div>Regards,</div>\n<div>Martin<br />\n<div>\n<blockquote style=\"margin: 0 0 0 .8ex; border-left: 1px #ccc solid; padding-left: 1ex;\">\n<div>\n<div></div>\n</div>\n</blockquote>\n</div>\n</div>",
    "PostedDate": "2011-08-18T12:18:35.123-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "660450",
    "ThreadId": "269460",
    "Html": "<p>Hi Martin,</p>\r\n<p>The exe doesn't technically need to be run on the server itself, you can run it from any internet connected machine.</p>\r\n<p>If you are writing a .net user control I'd look into calling functions from the FullTextSearch.Admin.AdminActions class directly, rather than faff about with the web service. Just reference the fulltextsearch.dll in your project and call those functions from your user control. That's all the web service actually does. If you look at the code it should be (relatively) simple to figure out what you need to do.</p>\r\n<p>Bjorn</p>",
    "PostedDate": "2011-08-19T01:57:28.17-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "660529",
    "ThreadId": "269460",
    "Html": "<p>Hi Bjorn,</p>\r\n<p>&nbsp;</p>\r\n<p>Cool, thanks. I have now written the .net usercontrol with the following code behind:</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre><span style=\"color: blue;\">using</span> System;\r\n<span style=\"color: blue;\">using</span> System.Collections.Generic;\r\n<span style=\"color: blue;\">using</span> System.Linq;\r\n<span style=\"color: blue;\">using</span> System.Web;\r\n<span style=\"color: blue;\">using</span> System.Web.UI;\r\n<span style=\"color: blue;\">using</span> System.Web.UI.WebControls;\r\n\r\n<span style=\"color: blue;\">namespace</span> FullTextSearchReindex\r\n{\r\n    <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">partial</span> <span style=\"color: blue;\">class</span> reindex : System.Web.UI.UserControl\r\n    {\r\n        <span style=\"color: blue;\">protected</span> <span style=\"color: blue;\">void</span> Page_Load(<span style=\"color: blue;\">object</span> sender, EventArgs e)\r\n        {\r\n            FullTextSearch.Admin.AdminActions.ReindexAllFullTextNodes();\r\n            <span style=\"color: green;\">//FullTextSearch.Admin.AdminActions.RebuildFullTextIndex(); </span>\r\n            \r\n        }\r\n    }\r\n}\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>It works with the ReindexAllFullTextNodes method, but unfortunately the \"RebuildFullTextIndex\" method gives an error:&nbsp;</p>\r\n<p><span>\r\n<h1>Server Error in '/' Application. \r\n<hr size=\"1\" />\r\n</h1>\r\n<h2><em>Object reference not set to an instance of an object.</em></h2>\r\n</span><span style=\"font-family: Arial, Helvetica, Geneva, SunSans-Regular, sans-serif;\"><strong>Description:&nbsp;</strong>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.&nbsp;<br /><br /><strong>Exception Details:&nbsp;</strong>System.NullReferenceException: Object reference not set to an instance of an object.<br /><br /><strong>Source Error:</strong>&nbsp;<br /><br /> </span></p>\r\n<table width=\"100%\" bgcolor=\"#ffffcc\">\r\n<tbody>\r\n<tr>\r\n<td><code>An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.</code></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n<p><span style=\"font-family: Arial, Helvetica, Geneva, SunSans-Regular, sans-serif;\"> <br /><strong>Stack Trace:</strong>&nbsp;<br /><br /> </span></p>\r\n<table width=\"100%\" bgcolor=\"#ffffcc\">\r\n<tbody>\r\n<tr>\r\n<td><code>\r\n<pre>[NullReferenceException: Object reference not set to an instance of an object.]\r\n   UmbracoExamine.UmbracoContentIndexer.GetDataToIndex(XElement node, String type) +164\r\n   Examine.LuceneEngine.Providers.LuceneIndexer.AddNodesToIndex(IEnumerable`1 nodes, String type) +139\r\n   UmbracoExamine.BaseUmbracoIndexer.AddNodesToIndex(String xPath, String type) +93\r\n   UmbracoExamine.BaseUmbracoIndexer.PerformIndexAll(String type) +769\r\n   Examine.LuceneEngine.Providers.LuceneIndexer.IndexAll(String type) +72\r\n   UmbracoExamine.BaseUmbracoIndexer.PerformIndexRebuild() +86\r\n   Examine.LuceneEngine.Providers.LuceneIndexer.RebuildIndex() +348\r\n   FullTextSearch.Admin.AdminActions.RebuildIndex(String index) +83\r\n   FullTextSearch.Admin.AdminActions.RebuildFullTextIndex() +85\r\n   FullTextSearchReindex.reindex.Page_Load(Object sender, EventArgs e) +32\r\n   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14\r\n   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35\r\n   System.Web.UI.Control.OnLoad(EventArgs e) +91\r\n   System.Web.UI.Control.LoadRecursive() +74\r\n   System.Web.UI.Control.LoadRecursive() +146\r\n   System.Web.UI.Control.LoadRecursive() +146\r\n   System.Web.UI.Control.LoadRecursive() +146\r\n   System.Web.UI.Control.LoadRecursive() +146\r\n   System.Web.UI.Control.LoadRecursive() +146\r\n   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207\r\n</pre>\r\n</code></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n<p><span style=\"font-family: Arial, Helvetica, Geneva, SunSans-Regular, sans-serif;\"> <br /> \r\n<hr size=\"1\" />\r\n<strong>Version Information:</strong>&nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.1</span></p>\r\n<p>&nbsp;</p>\r\n<p>Can you say why this happens?</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2011-08-19T04:44:41.933-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "660538",
    "ThreadId": "269460",
    "Html": "<p>I couldn't say exactly. It looks like examine is throwing the error.</p>\r\n<p>Do you get the same error when clicking the \"re-index\" button in the full text search tab in the developer section of the back office? Because that esentially calls the same function.</p>\r\n<p>Bjorn</p>",
    "PostedDate": "2011-08-19T05:07:15.603-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "660553",
    "ThreadId": "269460",
    "Html": "<p>Hi Bjorn,</p>\r\n<p>Yes, then pressing \"Re-Create Index\" I get the same error:</p>\r\n<p>&nbsp;</p>\r\n<p><span>\r\n<h1>Server Error in '/' Application. \r\n<hr size=\"1\" />\r\n</h1>\r\n<h2><em>Object reference not set to an instance of an object.</em></h2>\r\n</span><span style=\"font-family: Arial, Helvetica, Geneva, SunSans-Regular, sans-serif;\"><strong>Description:&nbsp;</strong>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.&nbsp;<br /><br /><strong>Exception Details:&nbsp;</strong>System.NullReferenceException: Object reference not set to an instance of an object.<br /><br /><strong>Source Error:</strong>&nbsp;<br /><br /> </span></p>\r\n<table width=\"100%\" bgcolor=\"#ffffcc\">\r\n<tbody>\r\n<tr>\r\n<td><code>An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.</code></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n<p><span style=\"font-family: Arial, Helvetica, Geneva, SunSans-Regular, sans-serif;\"> <br /><strong>Stack Trace:</strong>&nbsp;<br /><br /> </span></p>\r\n<table width=\"100%\" bgcolor=\"#ffffcc\">\r\n<tbody>\r\n<tr>\r\n<td><code>\r\n<pre>[NullReferenceException: Object reference not set to an instance of an object.]\r\n   UmbracoExamine.UmbracoContentIndexer.GetDataToIndex(XElement node, String type) +164\r\n   Examine.LuceneEngine.Providers.LuceneIndexer.AddNodesToIndex(IEnumerable`1 nodes, String type) +139\r\n   UmbracoExamine.BaseUmbracoIndexer.AddNodesToIndex(String xPath, String type) +92\r\n   UmbracoExamine.BaseUmbracoIndexer.PerformIndexAll(String type) +769\r\n   Examine.LuceneEngine.Providers.LuceneIndexer.IndexAll(String type) +71\r\n   UmbracoExamine.BaseUmbracoIndexer.PerformIndexRebuild() +86\r\n   Examine.LuceneEngine.Providers.LuceneIndexer.RebuildIndex() +348\r\n   FullTextSearch.Admin.AdminActions.RebuildIndex(String index) +83\r\n   FullTextSearch.Admin.AdminActions.RebuildFullTextIndex() +84\r\n   FullTextSearch.Admin.WebUserControl1.reCreate_Click(Object sender, EventArgs e) +11\r\n   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118\r\n   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112\r\n   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10\r\n   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13\r\n   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36\r\n   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563</pre>\r\n</code></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n<p><span style=\"font-family: Arial, Helvetica, Geneva, SunSans-Regular, sans-serif;\"> </span></p>\r\n<p>&nbsp;</p>\r\n<p>Pressing \"Re-index\" work fine. &nbsp;I have set&nbsp;<span style=\"font-family: Consolas, 'Courier New', Courier, monospace; white-space: pre;\"><span>&lt;</span><span>maintenanceServiceUsers</span><span>&gt;</span><span style=\"color: #ff0000;\">admin</span><span>&lt;/</span><span>maintenanceServiceUsers</span><span>&gt; </span></span>to \"admin\".</p>\r\n<p>Regaards,</p>\r\n<p>Martin</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2011-08-19T05:49:52.98-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "660565",
    "ThreadId": "269460",
    "Html": "<p>Something is throwing an exception during indexing. I'm not convinced this is necessarily specific to the RebuildFullTextIndex function, it could just be that the exception is being swallowed when indexing is being perfomed through other methods. It's pretty difficult to debug from here though.&nbsp;</p>\r\n<p>The first thing I would do is to have a look through the umbraco log and see if that sheds any light. That's the umbracoLog table in the site database. Look for records marked error that deal with examine or fulltextsearch and occur when re-indexing is being performed. Post them here. You might also want to check if there are specific pages not appearing in your index (try using LUKE to examine the index directly), as these are likely to be the ones throwing errors.</p>\r\n<p>Bjorn</p>",
    "PostedDate": "2011-08-19T06:11:57.213-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "660801",
    "ThreadId": "269460",
    "Html": "<p>Hi Bjorn,</p>\r\n<p>I have triggered index from both backend (the dashboard) and \"frontend\" (the usercontrol I made for the scheduled job). I throws the following errors:</p>\r\n<p>&nbsp;</p>\r\n<p><strong>From dashboard:</strong></p>\r\n<p>At /umbraco/dashboard.aspx?app=developer (Referred by: http://www.glrye.dk/umbraco/dashboard.aspx?app=developer): System.NullReferenceException: Object reference not set to an instance of an object. at UmbracoExamine.UmbracoContentIndexer.GetDataToIndex(XElement node, String type) at Examine.LuceneEngine.Providers.LuceneIndexer.AddNodesToIndex(IEnumerable`1 nodes, String type) at UmbracoExamine.BaseUmbracoIndexer.AddNodesToIndex(String xPath, String type) at UmbracoExamine.BaseUmbracoIndexer.PerformIndexAll(String type) at Examine.LuceneEngine.Providers.LuceneIndexer.IndexAll(String type) at UmbracoExamine.BaseUmbracoIndexer.PerformIndexRebuild() at Examine.LuceneEngine.Providers.LuceneIndexer.RebuildIndex() at FullTextSearch.Admin.AdminActions.RebuildIndex(String index) at FullTextSearch.Admin.AdminActions.RebuildFullTextIndex() at FullTextSearch.Admin.WebUserControl1.reCreate_Click(Object sender, EventArgs e) at System.Web.UI.WebControls.Button.OnClick(EventArgs e) at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)</p>\r\n<p><strong>From frontend/user control</strong><br />At /4182.aspx (Referred by: http://www.glrye.dk/umbraco/editContent.aspx?id=4182): System.NullReferenceException: Object reference not set to an instance of an object. at UmbracoExamine.UmbracoContentIndexer.GetDataToIndex(XElement node, String type) at Examine.LuceneEngine.Providers.LuceneIndexer.AddNodesToIndex(IEnumerable`1 nodes, String type) at UmbracoExamine.BaseUmbracoIndexer.AddNodesToIndex(String xPath, String type) at UmbracoExamine.BaseUmbracoIndexer.PerformIndexAll(String type) at Examine.LuceneEngine.Providers.LuceneIndexer.IndexAll(String type) at UmbracoExamine.BaseUmbracoIndexer.PerformIndexRebuild() at Examine.LuceneEngine.Providers.LuceneIndexer.RebuildIndex() at FullTextSearch.Admin.AdminActions.RebuildIndex(String index) at FullTextSearch.Admin.AdminActions.RebuildFullTextIndex() at FullTextSearchReindex.reindex.Page_Load(Object sender, EventArgs e) at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) at System.Web.UI.Control.OnLoad(EventArgs e) at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Control.LoadRecursive() at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)</p>\r\n<p>&nbsp;</p>\r\n<p>If it might help I would like to use LUKE to analyze the index but I don&acute;t know what LUKE is? Where can I find it?</p>\r\n<p>&nbsp;</p>\r\n<p>/Martin</p>",
    "PostedDate": "2011-08-19T14:36:36.11-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]